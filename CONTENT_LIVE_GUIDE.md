# 内容管理与直播指南

本指南将说明如何管理“时光宝盒”中的照片/视频，以及如何使用“云直播”功能。

##  Part 1: 内容管理（时光宝盒）

所有内容管理都建议在**本地全功能模式**下进行。

1.  **启动服务**：首先，按照 `LOCAL_SERVER_GUIDE.md` 启动 `node server.js`。
2.  **访问管理端**：在浏览器中打开 `http://localhost:3001` 并进入“时光宝盒”页面。

### 上传新记忆

1.  点击页面右上角的 **“📤 上传记忆”** 按钮。
2.  在弹出的窗口中，**拖拽**或**点击**选择您要上传的照片或视频。
3.  填写**标题**（必填）和**描述**。
4.  点击 **“确认上传”**。文件会被自动保存到您项目根目录下的 `uploads/` 文件夹，并更新数据记录。

### 删除记忆

1.  将鼠标悬停在您想删除的记忆卡片上。
2.  点击右上角出现的 **“🗑️”** 垃圾桶图标。
3.  在弹出的确认框中点击“确定”。文件将从您的硬盘和数据记录中被永久删除。

---

## Part 2: 云直播

直播功能基于 WebRTC 技术，允许您将电脑或手机的摄像头/屏幕画面实时分享给他人。

### 如何开播（主播）

1.  **访问直播页**：
    *   **电脑端**：访问 `http://localhost:3001/live`。
    *   **移动端（推荐）**：使用 Cloudflare Tunnel 提供的 `https://` 域名（例如 `https://newyear-live.alexander.xin/live`）访问，以获取摄像头权限。

2.  **选择直播模式**：
    *   **🎥 摄像头直播**：调用设备的前置/后置摄像头。开播后，您会看到一个“切换摄像头”的按钮。
    *   **💻 屏幕共享**：分享您的电脑屏幕、某个应用窗口或浏览器标签页。

3.  **授权**：浏览器会请求摄像头、麦克风或屏幕录制权限，请点击“允许”。

4.  **停止直播**：点击页面下方的“停止直播”按钮即可。

### 如何观看（观众）

1.  **进入直播间**：
    *   在任何设备上（电脑、手机、平板），访问您的直播域名（例如 `https://newyear-live.alexander.xin/live`）。
2.  **开始观看**：
    *   点击 **“👀 我要观看”** 按钮。
    *   稍等片刻，主播的画面就会出现。观众可以自行控制播放器的音量或全屏。
3.  **退出**：点击“退出观看”按钮或直接关闭页面。

### ⚠️ 重要提示

-   **安全环境**：直播功能（尤其是开播）**必须**在安全环境下（`localhost` 或 `https`）运行。直接使用 IP 地址（`http://192.168.x.x`）访问将无法调用摄像头。
-   **网络**：直播的清晰度和流畅度取决于主播端的上传带宽。在局域网内使用时效果最佳。
